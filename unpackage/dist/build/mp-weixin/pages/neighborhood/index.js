"use strict";const e=require("../../common/vendor.js"),a=require("../../store/user.js"),t=require("../../hook/GetPoem.js"),o={__name:"index",setup(o){e.reactive([1,2,3,4,5,6,7,8,9]),e.ref(null);let n=e.ref(0);const s=e.ref(!1),r=a.useUserstore(),i=e.ref([]);new e.dayjs;const l=e.ref(!0);e.onReachBottom((()=>{u()})),e.onShareAppMessage((e=>("button"===e.from&&console.log(e.target),{imageUrl:"/static/diamond.png",title:"每天闲暇时来读一首诗吧",path:"/pages/index/index"})));const u=async()=>{const a=e.$s.database(),t=await async function(){const a=e.$s.database();return await a.collection("users").count().then((e=>(console.log(e),e.result.total)))}();if(n.value=t,i.value.length<t-1){s.value=!0;let{result:e}=await a.collection("users").where(`_id!='${r.UserData._id}'`).field({user_name:!0,create:!0,self_introduction:!0,slogan:!0,avatar:!0,LoginTime:!0,RegisteredTime:!0,PoemNumber:!0}).skip(i.value.length).limit(7).get();console.log(...e.data),i.value=[...i.value,...e.data],s.value=!1}else setTimeout((()=>{s.value=!1,l.value=!1,console.log("没有更多了")}),2e3)};return e.onMounted((()=>{u()})),(a,o)=>e.e({a:e.f(i.value,((a,o,n)=>({a:a.avatar,b:e.t(a.user_name),c:e.t(a.slogan),d:e.t(a.self_introduction),e:e.t(a.PoemNumber),f:e.t(e.unref(t.time)(a.LoginTime)),g:e.o((t=>{return o="Personal",n=a,console.log("跳转"),void e.index.navigateTo({url:`/pages/${o}/index?data=`+JSON.stringify(n),animationType:"pop-in",animationDuration:1e4});var o,n}),o),h:o}))),b:e.t("隐藏"),c:s.value&&l.value},(s.value&&l.value,{}),{d:!l.value},(l.value,{}))}},n=e._export_sfc(o,[["__scopeId","data-v-a7f30a43"]]);o.__runtimeHooks=2,wx.createPage(n);
