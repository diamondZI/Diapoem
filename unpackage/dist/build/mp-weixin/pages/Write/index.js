"use strict";const e=require("../../common/vendor.js"),s=require("../../store/draft.js"),a=require("../../store/user.js");if(!Array){(e.resolveComponent("uni-popup-message")+e.resolveComponent("uni-popup"))()}Math||(u+o+(()=>"../../uni_modules/uni-popup/components/uni-popup-message/uni-popup-message.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const o=()=>"../../components/Opspringers/index.js",u=()=>"../../components/Poem/index.js",p={__name:"index",setup(o){const u=e.ref("0px"),p=e.ref(""),t=e.ref(""),r=a.useUserstore(),n=e.computed((()=>t.value.split("\n"))),l=e.$s.importObject("poem"),i=e.computed((()=>({title:p.value,author:r.UserData.user_name,paragraphs:n.value}))),m=s.useDarftStore(),v=e.ref(!1),c=e.ref(!1);e.ref("");const d=e.reactive({msgType:"",messageText:""}),g=e.ref(null),f=e=>{const{height:s}=e.detail;console.log(s),u.value=s+"px"};function _(e,s){d.msgType=e,d.messageText=s,g.value.open()}const x=()=>{v.value=!1},j=async()=>{const e=(new Date).getTime();let s=await l.Set({...i.value,CreateTime:e,user_id:r.UserData._id,LikeNumber:0});200===s.ok&&await r.SetPoemNumber(),_(200===s.ok?"success":"error",s.msg)};return e.onLoad((e=>{p.value=JSON.parse(e.value),t.value=JSON.parse(e.paragraphs)})),(s,a)=>e.e({a:v.value},v.value?{b:e.p({poem:e.unref(i)}),c:e.p({Showclose:x,AddPoem:j})}:{},{d:e.p({type:d.msgType,message:d.messageText,duration:2e3}),e:e.sr(g,"9d22e1ef-2",{k:"message"}),f:e.p({type:"message"}),g:e.o(f),h:!c.value,i:p.value,j:e.o((e=>p.value=e.detail.value)),k:t.value,l:e.o((e=>t.value=e.detail.value)),m:e.o((e=>{v.value=!0})),n:e.o((e=>(v.value=!1,t.value="",p.value="",void _("success","成功把他丢进了垃圾桶")))),o:e.o((e=>(m.PUSHDARFT(i.value),void _("success","成功放入了草稿")))),p:u.value})}},t=e._export_sfc(p,[["__scopeId","data-v-9d22e1ef"]]);wx.createPage(t);
